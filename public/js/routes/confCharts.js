var temp=[{"_id":"5b28cbde5ed4d5001ee77f43","time":"1529400282187","timeS":"1529400286195","device_id":"pi0-10","sensor_id":"am2302H","data":"88.4"},
{"_id":"5b28cbff5ed4d5001ee77f44","time":"1529400317021","timeS":"1529400319032","device_id":"pi0-10","sensor_id":"am2302T","data":"20.6"},
{"_id":"5b28cc015ed4d5001ee77f45","time":"1529400317021","timeS":"1529400321143","device_id":"pi0-10","sensor_id":"am2302H","data":"88.1"},
{"_id":"5b28cc7f5ed4d5001ee77f46","time":"1529400445255","timeS":"1529400447454","device_id":"pi0-10","sensor_id":"am2302T","data":"20.6"},
{"_id":"5b28cc815ed4d5001ee77f47","time":"1529400445255","timeS":"1529400449591","device_id":"pi0-10","sensor_id":"am2302H","data":"88.1"},
{"_id":"5b28cca95ed4d5001ee77f48","time":"1529400488023","timeS":"1529400489899","device_id":"pi0-10","sensor_id":"am2302T","data":"20.6"},
{"_id":"5b28ccac5ed4d5001ee77f49","time":"1529400488023","timeS":"1529400492050","device_id":"pi0-10","sensor_id":"am2302H","data":"88.5"},
{"_id":"5b28ccd15ed4d5001ee77f4a","time":"1529400527942","timeS":"1529400529855","device_id":"pi0-10","sensor_id":"am2302T","data":"20.6"},
{"_id":"5b28ccd35ed4d5001ee77f4b","time":"1529400527942","timeS":"1529400531960","device_id":"pi0-10","sensor_id":"am2302H","data":"88.7"},
{"_id":"5b28ccf75ed4d5001ee77f4c","time":"1529400565322","timeS":"1529400567193","device_id":"pi0-10","sensor_id":"am2302T","data":"20.6"},
{"_id":"5b28ccf95ed4d5001ee77f4d","time":"1529400565322","timeS":"1529400569381","device_id":"pi0-10","sensor_id":"am2302H","data":"87.4"},
{"_id":"5b28cd1a5ed4d5001ee77f4e","time":"1529400600214","timeS":"1529400602135","device_id":"pi0-10","sensor_id":"am2302T","data":"20.6"},
{"_id":"5b28cd1c5ed4d5001ee77f4f","time":"1529400600214","timeS":"1529400604287","device_id":"pi0-10","sensor_id":"am2302H","data":"87.3"},
{"_id":"5b28ce1d5ed4d5001ee77f50","time":"1529400859306","timeS":"1529400861276","device_id":"pi0-10","sensor_id":"am2302T","data":"20.7"},
{"_id":"5b28ce1f5ed4d5001ee77f51","time":"1529400859306","timeS":"1529400863427","device_id":"pi0-10","sensor_id":"am2302H","data":"88.8"},
{"_id":"5b28ce405ed4d5001ee77f52","time":"1529400894260","timeS":"1529400896104","device_id":"pi0-10","sensor_id":"am2302T","data":"20.7"},
{"_id":"5b28ce425ed4d5001ee77f53","time":"1529400894260","timeS":"1529400898236","device_id":"pi0-10","sensor_id":"am2302H","data":"88.9"},
{"_id":"5b28ce6a5ed4d5001ee77f54","time":"1529400936678","timeS":"1529400938577","device_id":"pi0-10","sensor_id":"am2302T","data":"20.7"},
{"_id":"5b28ce6c5ed4d5001ee77f55","time":"1529400936678","timeS":"1529400940767","device_id":"pi0-10","sensor_id":"am2302H","data":"88.7"},
{"_id":"5b28ce9c5ed4d5001ee77f56","time":"1529400986795","timeS":"1529400988715","device_id":"pi0-10","sensor_id":"am2302T","data":"20.7"},
{"_id":"5b28ce9e5ed4d5001ee77f57","time":"1529400986795","timeS":"1529400990843","device_id":"pi0-10","sensor_id":"am2302H","data":"89.6"},
{"_id":"5b28cebf5ed4d5001ee77f58","time":"1529401021689","timeS":"1529401023549","device_id":"pi0-10","sensor_id":"am2302T","data":"20.7"},
{"_id":"5b28cec15ed4d5001ee77f59","time":"1529401021689","timeS":"1529401025667","device_id":"pi0-10","sensor_id":"am2302H","data":"89.7"},
{"_id":"5b28cefe5ed4d5001ee77f5a","time":"1529401084356","timeS":"1529401086360","device_id":"pi0-10","sensor_id":"am2302T","data":"20.7"},
{"_id":"5b28cf005ed4d5001ee77f5b","time":"1529401084356","timeS":"1529401088504","device_id":"pi0-10","sensor_id":"am2302H","data":"88.9"},
{"_id":"5b28cf6c5ed4d5001ee77f5c","time":"1529401194916","timeS":"1529401196821","device_id":"pi0-10","sensor_id":"am2302T","data":"20.8"},
{"_id":"5b28cf6e5ed4d5001ee77f5d","time":"1529401194916","timeS":"1529401198994","device_id":"pi0-10","sensor_id":"am2302H","data":"88.4"},
{"_id":"5b28cfa95ed4d5001ee77f5e","time":"1529401255114","timeS":"1529401257011","device_id":"pi0-10","sensor_id":"am2302T","data":"20.7"},
{"_id":"5b28cfab5ed4d5001ee77f5f","time":"1529401255114","timeS":"1529401259144","device_id":"pi0-10","sensor_id":"am2302H","data":"86.3"},
{"_id":"5b28cfd55ed4d5001ee77f60","time":"1529401300102","timeS":"1529401301954","device_id":"pi0-10","sensor_id":"am2302T","data":"20.8"},
{"_id":"5b28cfd85ed4d5001ee77f61","time":"1529401300102","timeS":"1529401304093","device_id":"pi0-10","sensor_id":"am2302H","data":"86"},
{"_id":"5b28d0025ed4d5001ee77f62","time":"1529401345065","timeS":"1529401346969","device_id":"pi0-10","sensor_id":"am2302T","data":"20.8"},
{"_id":"5b28d0055ed4d5001ee77f63","time":"1529401345065","timeS":"1529401349317","device_id":"pi0-10","sensor_id":"am2302H","data":"88.6"},
{"_id":"5b28d02b5ed4d5001ee77f64","time":"1529401385252","timeS":"1529401387180","device_id":"pi0-10","sensor_id":"am2302T","data":"20.8"},
{"_id":"5b28d02d5ed4d5001ee77f65","time":"1529401385252","timeS":"1529401389319","device_id":"pi0-10","sensor_id":"am2302H","data":"88.2"},
{"_id":"5b28d04e5ed4d5001ee77f66","time":"1529401420165","timeS":"1529401422099","device_id":"pi0-10","sensor_id":"am2302T","data":"20.8"},
{"_id":"5b28d0505ed4d5001ee77f67","time":"1529401420165","timeS":"1529401424238","device_id":"pi0-10","sensor_id":"am2302H","data":"88.2"},
{"_id":"5b28d0c95ed4d5001ee77f68","time":"1529401543304","timeS":"1529401545415","device_id":"pi0-10","sensor_id":"am2302T","data":"20.8"},
{"_id":"5b28d0cb5ed4d5001ee77f69","time":"1529401543304","timeS":"1529401547574","device_id":"pi0-10","sensor_id":"am2302H","data":"86.4"},
{"_id":"5b28d0f35ed4d5001ee77f6a","time":"1529401585997","timeS":"1529401587873","device_id":"pi0-10","sensor_id":"am2302T","data":"20.8"},
{"_id":"5b28d0f55ed4d5001ee77f6b","time":"1529401585997","timeS":"1529401589995","device_id":"pi0-10","sensor_id":"am2302H","data":"88.2"},
{"_id":"5b28d1255ed4d5001ee77f6c","time":"1529401636016","timeS":"1529401637937","device_id":"pi0-10","sensor_id":"am2302T","data":"20.9"},
{"_id":"5b28d1285ed4d5001ee77f6d","time":"1529401636016","timeS":"1529401640097","device_id":"pi0-10","sensor_id":"am2302H","data":"88.6"},
{"_id":"5b28d14b5ed4d5001ee77f6e","time":"1529401673463","timeS":"1529401675369","device_id":"pi0-10","sensor_id":"am2302T","data":"20.9"},
{"_id":"5b28d14d5ed4d5001ee77f6f","time":"1529401673463","timeS":"1529401677547","device_id":"pi0-10","sensor_id":"am2302H","data":"88"},
{"_id":"5b28d1825ed4d5001ee77f70","time":"1529401728599","timeS":"1529401730461","device_id":"pi0-10","sensor_id":"am2302T","data":"20.9"},
{"_id":"5b28d1845ed4d5001ee77f71","time":"1529401728599","timeS":"1529401732785","device_id":"pi0-10","sensor_id":"am2302H","data":"87.2"},
{"_id":"5b28d1be5ed4d5001ee77f72","time":"1529401788976","timeS":"1529401790920","device_id":"pi0-10","sensor_id":"am2302T","data":"20.9"},
{"_id":"5b28d1c15ed4d5001ee77f73","time":"1529401788976","timeS":"1529401793085","device_id":"pi0-10","sensor_id":"am2302H","data":"87.2"},
{"_id":"5b28d1e45ed4d5001ee77f74","time":"1529401826443","timeS":"1529401828328","device_id":"pi0-10","sensor_id":"am2302T","data":"20.9"},
{"_id":"5b28d1e65ed4d5001ee77f75","time":"1529401826443","timeS":"1529401830515","device_id":"pi0-10","sensor_id":"am2302H","data":"85.1"},
{"_id":"5b28d20f5ed4d5001ee77f76","time":"1529401868952","timeS":"1529401871051","device_id":"pi0-10","sensor_id":"am2302T","data":"20.9"},
{"_id":"5b28d2115ed4d5001ee77f77","time":"1529401868952","timeS":"1529401873231","device_id":"pi0-10","sensor_id":"am2302H","data":"87.6"},
{"_id":"5b28d23c5ed4d5001ee77f78","time":"1529401914182","timeS":"1529401916144","device_id":"pi0-10","sensor_id":"am2302T","data":"20.9"},
{"_id":"5b28d23e5ed4d5001ee77f79","time":"1529401914182","timeS":"1529401918285","device_id":"pi0-10","sensor_id":"am2302H","data":"86.9"},
{"_id":"5b28d25e5ed4d5001ee77f7a","time":"1529401949110","timeS":"1529401950975","device_id":"pi0-10","sensor_id":"am2302T","data":"20.9"},
{"_id":"5b28d2615ed4d5001ee77f7b","time":"1529401949110","timeS":"1529401953141","device_id":"pi0-10","sensor_id":"am2302H","data":"87"},
{"_id":"5b28d2895ed4d5001ee77f7c","time":"1529401991558","timeS":"1529401993506","device_id":"pi0-10","sensor_id":"am2302T","data":"20.9"},
{"_id":"5b28d28b5ed4d5001ee77f7d","time":"1529401991558","timeS":"1529401995663","device_id":"pi0-10","sensor_id":"am2302H","data":"86.9"},
{"_id":"5b28d2b95ed4d5001ee77f7e","time":"1529402039144","timeS":"1529402041062","device_id":"pi0-10","sensor_id":"am2302T","data":"20.9"},
{"_id":"5b28d2bb5ed4d5001ee77f7f","time":"1529402039144","timeS":"1529402043348","device_id":"pi0-10","sensor_id":"am2302H","data":"87.5"}];
var confCharts = {
    data () {
	return {
	    activeTab:1,
	    selectChart : vue.selectChart,
	    chartFields:[
		{'field':'name',"type":"text","required":"false","default":""},
		{'field':'group_name',"type":"select","required":"true","default":""},
		{'field':'device_id',"type":"select","required":"true","default":""},
		{'field':'sensor_id',"type":"select","required":"true","default":""},
		{'field':'interval',"type":"time","required":"true","default":1800},
		{'field':'chart',"type":"select","required":"true","default":vue.selectChart[0]},
		{'field':'color',"type":"color","default":"#00a600"},
		{'field':'min',"type":"number","default":""},
		{'field':'minColor',"type":"color","default":"#0000FF"},
		{'field':'max',"type":"number"},
		{'field':'maxColor',"type":"color","default":"#ff0000"}
		],
		navBtns :[
			{'name':'dash','msg':'Select existing Dashboard','buttons':[{'button':'del','status':false},{'button':'right','status':true}]},
			{'name':'device','msg':'Choose Group, Device and Sensor to monitor','buttons':[{'button':'left','status':true},{'button':'right','status':false}]},
			{'name':'chart','msg':'Select Chart properties','buttons':[{'button':'left','status':true},{'button':'right','status':true}]},
			{'name':'alert','msg':'Configure Alerts','buttons':[{'button':'left','status':true},{'button':'right','status':true}]},
			{'name':'view','msg':'Save or go to previous steps','buttons':[{'button':'left','status':true},{'button':'save','status':true}]}
		],
	    dashColumns: [{
			field: 'name',
			label: 'Dashboard',
			width: '40',
			sortable:true,
			centered : true
	    }],		
	    group : '',
	    groupColumns: [{
		field: 'group_name',
		label: 'Group',
		width: '40',
		sortable:true,
		centered : true
	    }],
	    selectGroups : '',
	    devices : '',
	    deviceColumns: [{
		field: 'device_name',
		label: 'Device',
		width: '40',
		sortable:true,
		centered: true,
	    }],
	    sensors : '',
	    sensorColumns: [{
		field: 'sensor_id',
		label: 'Sensor',
		width: '40',
		sortable:true,
		centered: true,
	    }],
	    selectSensors : '',
	    dashConfig : {},
	    dashConfigHist : [],
	    selectDash : [],
	    selectGroups : '',
	    isMounted:false
	}
    }, computed: {
    }, created () {
		c('created confCharts');
		vue.$data.isLoader=true;
		addScript({"path":"./js/Chart.min.js","name":"Chart.min.js"},function(){
	});
    }, mounted () {
		this.getGroups();
		Vue.component('navlevel', navLevel);
	var t=this;
	t.$nextTick(function () {
	    t.$data.dashConfig = t.getDefault();
	    t.$data.isMounted=true;
	    t.$data.selectDash=this.getDash();
	    c('mounted confCharts');
	    vue.$data.isLoader=false;
	});  
    }, methods : {
	reset(m){
		var d=this.$data;
	},
	required (){
		var d = this.$data
		var f=d.chartFields.filter(o => o.required === "true" )
		if(d.group && d.group.group_name && d.devices.device_name && d.sensors.sensor_id){
			d.navBtns.find(o=>o.name==='device').buttons.map(o=>o.status=true)
		} else{
			d.navBtns.find(o=>o.name==='device').buttons.find(o=>o.button==='right').status=false;
		}
		var e=f.map(o=> 
			d.dashConfig[o.field] !==undefined && ['',null,undefined].indexOf(d.dashConfig[o.field])===-1
		);
		return e.indexOf(false)!==-1  ? false : true;
	}, getDefault(){
		d = this.$data;
		var n={};
		d.chartFields.map(o=>{
			n[o.field]=o.default ? o.default : "";
		});	
		return n;
	}, getGroups (){
		t = this;
		if (!vue.gs('groups')){
		vue.getData({"path":"query/groups"}, function(err,res){
			if(res){
				vue.ls(['groups',JSON.stringify(res)]);
				t.$data.selectGroups=res;
			} else {
				c(err);
			}
		});
		} else{
			t.$data.selectGroups = vue.isJson(vue.gs('groups'),{});
		};
	}, getDash  () {
		var n=[this.getDefault()];
		return vue.gs('dash') ? n.concat(JSON.parse(vue.gs('dash'))) : n;
	}, dashLoad (){
		vue.tstS('dashload')
		if (vue.el('selectDash')===null || vue.el('selectDash').value===''){
			// this.$data.dashConfig=this.$data.dashDefault;
			this.destroyChart();
		} else {
			this.$data.dashConfig=vue.el('selectDash').value;
		};
	}, saveDash  () {
		var t = this;
		var data = t.$data.dashConfig;
		data.name = data.name || (data.group_name+data.device_id+data.sensor_id);
		vue.getData({"path":"query/saveGraph","graph=":data}, function(err,res){
			if(res){
				vue.tstS('Saved');
				var d = vue.gs('dash') ? JSON.parse(vue.gs('dash')) : [];
				var pos = d.findIndex(o => o.name === data.name);
				if (pos!=-1){
					d[pos]=data;	
				} else{
					d.push(data);
				};
				vue.ls(['dash',JSON.stringify(d)]);
				t.$data.selectDash=t.getDash();
				t.hist('s');
			} else {
				vue.tstW('dashboard not saved, see log');
				c(err);
			}
		});
	},	hist(e){
		var d = this.$data;
		if (e==='s'){
			d.dashConfigHist[1]=(JSON.stringify(d.dashConfig))
		}
		else{
			if(d.dashConfigHist.length===2){
				d.selectDash[d.dashConfigHist[0]]=JSON.parse(d.dashConfigHist[1]);
			}
			d.dashConfigHist[0]=(d.selectDash.findIndex(o=>o==e))
			d.dashConfigHist[1]=(JSON.stringify(e))
		}
	}, changeChart (){	    
		vue.$data.isLoader=true;
		var t=this;
		var d = t.$data.dashConfig;
		if(t.required){
		var dt= Date.now();
		// t.showChart(temp)
		vue.getData({"path":"query/feedsByIndex","parent":"device_id","parentVal":d.device_id,
			"from":(dt-d.interval*1000),"to":dt}
		, function(err,res){
			vue.$data.isLoader=false;
			if (res && res.length>0){
					t.showChart(res);
			} else if (res){
				t.destroyChart();
				vue.tstW('No data found');
			} else if (err){
				c(err);
			}
		});
		} else{
			vue.tstW('not enough parameters');
		};
	}, destroyChart (){
		if (mainChart && vue.el("mainChart")){mainChart.destroy();vue.el("mainChart").innerHTML="";}; 
	}, showChart (msg){
		var t = this;
		vue.$data.isLoader=true;
		var datasets=[];
		var d = this.$data;
		var ddd = d.dashConfig;
		// c(ddd)
		var dataset={label:ddd.group_name+'-'+ddd.device_id+'-'+ddd.sensor_id,
		borderWidth:1};	
		// c(dataset);
		var sensor = d.devices.device_sensors;
		sensor.map( o=> {
			c(o.sensor_id)
			var x = msg.filter(rr => rr.sensor_id ===o.sensor_id);
			c(x);
			var dataset={label:ddd.group_name+'-'+ddd.device_id+'-'+o.sensor_id, borderWidth:1};
			dataset.labels = [];
			dataset.data = [];
			dataset.dataColor = [];
			if (['pie','doughnut','map'].indexOf(dataset.type) ===-1){
				c(x)
				x.map(ox => {
					d = new Date(o.timeS); // The 0
					dataset.labels.push(moment(d))
					dataset.data.push(ox.data);
						if(ddd.min !=="" && ox.data<ddd.min){
							dataset.dataColor.push(ddd.minColor);
						} else if(ddd.max !=="" && ox.data>ddd.max){
							dataset.dataColor.push(ddd.maxColor);
						} else{
							dataset.dataColor.push(ddd.color||'black');
						}
					})
			} else{
				if(ddd.min !==""){
					dataset.dataColor.push(ddd.minColor)
					var m = x.filter(({data}) => data < ddd.min).length;
					dataset.data.push(m);
					dataset.labels.push('min-'+m||0);
				}
				if(ddd.max !==""){
					dataset.dataColor.push(ddd.maxColor)
					var m = x.filter(({data}) => data > ddd.max).length;
					dataset.data.push(m);
					labels.push('max-'+m||0)
				}
				var m = x.length - (data[0]||0)-(data[1]||0);
				dataset.dataColor.push(ddd.color);
				dataset.data.push(m);
				dataset.labels.push('ok-'+m||0);
				dataset.labels.push('total-'+msg.length);
			}
			dataset.pointBackgroundColor = dataset.dataColor,
			dataset.backgroundColor =dataset.dataColor,
			datasets.push(dataset)
			c(datasets)
			c(dataset)
		});
		c('destory');
		c(datasets)
		this.destroyChart();
		mainChart = new Chart( vue.el('mainChart').getContext('2d'), {
		type: ddd.chart ? ddd.chart : this.$data.selectChart[0],
		data: {
			labels: datasets[0].labels,
			datasets: datasets
		}, options: {
			responsive: true,
			legend: {
			labels: {
				fontColor: "black",
				fontSize: 24
			}
			},
			scales: {
				yAxes: [{
					ticks: {
					beginAtZero: true
					}
				}],
				xAxes: [{
					ticks: {
						fontColor: "black",
						fontSize: 24,
						beginAtZero: true
					}
				}]
			}
		}
		});
		vue.$data.isLoader=false;
	}, changeTab : function (){
		tab = this.$data.activeTab;
		if(d.activeTab===4){
			d.dashConfig.group_name=d.group.group_name;
			d.dashConfig.device_id=d.devices.device_id;
			d.dashConfig.sensor_id=d.sensors.sensor_id;
			this.changeChart();
		}
	},compEvent : function(data){
			if(data==='left'){
				this.$data.activeTab--;
			} else if(data=='right'){
				this.$data.activeTab++;
			} else if(data=='save'){
				this.saveDash();
			} else if(data=='del'){
				vue.tstS('del')
			}
		}
	},
	watch : {
		dashConfig(){
			var d = this.$data ;
			if(d.dashConfig.name!==""){
				d.navBtns.dash.buttons.map(o=>o.status=true)
			} else{
				d.navBtns.dash.buttons.find(o=>o.button==='del').status=false;
			}
			d.group = d.selectGroups ? d.selectGroups.find(o=>o.group_name===d.dashConfig.group_name):'';
			if (d.group!==undefined && d.group.group_devices!==undefined){
				d.devices=d.group.group_devices.find(o=>o.device_name===d.dashConfig.device_id)||'';
			}
			if (d.devices!=''){
				d.sensors=d.devices.device_sensors.find(o=>o.sensor_id===d.dashConfig.sensor_id)||'';
			}
		}, group(){
			c('group')
			var d=this.$data;
			d.devices='';
		}, devices(){
			c('dev')
			var d=this.$data;
			d.sensors=''
		}
	},
	template :
	`<div>
		<b-tabs type="is-boxed" v-model="activeTab" @change="changeTab()" v-if="isMounted">
		<b-tab-item label="speedometer" class="is-dark">
			<template slot="header">
				<b-icon icon="speedometer"></b-icon>
				<span> Dashboards <b-tag rounded> {{selectDash.length - 1}} </b-tag> </span>
			</template>
			<navlevel v-bind:prog="{'steps':navBtns.length-1,'pos':'0'}"  v-bind:nav="navBtns[0]" v-on:compEvent="compEvent($event)"></navlevel>
				<b-table bordered narrowed class="column is-4"
				 :data="selectDash"
				 :columns="dashColumns"
				 focusable
				 :selected.sync="dashConfig"
				 paginated
				 :per-page="10"
				 ></b-table>
		</b-tab-item>
		<b-tab-item label="Devices" icon="group" :disabled="!required()" > 
			<navlevel v-bind:prog="{'steps':navBtns.length-1,'pos':'1'}"  v-bind:nav="navBtns[1]" v-on:compEvent="compEvent($event)"></navlevel>
			<section class="columns">
			<b-table bordered narrowed class="column is-4"
				 :data="selectGroups"
				 :columns="groupColumns"
				 focusable
				 :selected.sync="group"
				 paginated
				 :per-page="10"
				 @select="reset('g')"
				 ></b-table>
			<b-table bordered narrowed class="column is-4" v-if="group && group.group_devices"
				 :data="group.group_devices"
				 :columns="deviceColumns"
				 focusable
				 :selected.sync="devices"
				 paginated
				 :per-page="10"
				 @select="reset('d')"
				 >
			</b-table>
			<b-table bordered narrowed class="column is-4"
				 :data="devices.device_sensors"
				 :columns="sensorColumns"
				 focusable
				 :selected.sync="sensors"
				 paginated
				 :per-page="10"
				 ></b-table>
		</section>
		</b-tab-item>
		<b-tab-item label="Chart" icon="finance" :disabled="!required()">
		<navlevel v-bind:prog="{'steps':navBtns.length-1,'pos':'2'}"  v-bind:nav="navBtns[2]" v-on:compEvent="compEvent($event)"></navlevel>
		<section class="columns">
			<b-field grouped>
			<b-field label="Chart" class="column is-4" type="is-warning">
				<b-select id="chart" v-model="dashConfig.chart">
				<option
					v-for="o in selectChart"
					:value="o">
					{{o}}
				</option>
				</b-select>
			</b-field>
			<b-field label="Interval" class="column is-4" type="is-warning">
				<b-select id="interval" v-model="dashConfig.interval">
				<option
					v-for="o in vue.$data.selectInterval"
					:value="o">
					{{moment.duration(o, "seconds").humanize()}}
				</option>
				</b-select>
			</b-field>
			<b-field label="Color" class="column is-4">
				<input id="color" type="color" v-model="dashConfig.color"></input>
			</b-field>
			</b-field>
		</section>
		<section class="columns">
			<b-field grouped>
			<b-field label="Minimum" class="column is-5">
				<input type="number" id="min" v-model="dashConfig.min"></input>
			</b-field>
			<b-field label="Color" class="column is-5">
				<input id="minColor" type="color" v-model="dashConfig.minColor"></input>
			</b-field>
			</b-field>
		</section>
		<section class="columns">
			<b-field grouped>
			<b-field label="Maximum" class="column is-5">
				<input type="number" id="max" v-model="dashConfig.max"></input>
			</b-field>
			<b-field label="Color" class="column is-5">
				<input id="maxColor" type="color" v-model="dashConfig.maxColor"></input>
			</b-field>
		</section>
		</b-tab-item>
		<b-tab-item label="Alerts" icon="alert"  :disabled="!required()">
		<navlevel v-bind:prog="{'steps':navBtns.length-1,'pos':'3'}"  v-bind:nav="navBtns[3]" v-on:compEvent="compEvent($event)"></navlevel>
		</b-tab-item>
		<b-tab-item label="View" icon="eye" :disabled="!required()">
		<navlevel v-bind:prog="{'steps':navBtns.length-1,'pos':'4'}"  v-bind:nav="navBtns[4]" v-on:compEvent="compEvent($event)"></navlevel>
		<canvas id="mainChart"></canvas>
		</b-tab-item>
	</b-tabs>	
	</div>
	</div>`
};